<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/keen-analysis@latest/dist/keen-analysis.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@keen.io/dataviz@latest/dist/dataviz.min.js"></script>
    <title></title>
  </head>
  <body>
    <div id="container" style="width: 600px; height: 500px"></div>
    <script type="text/javascript">
      // NewDataViz Docs
      // const client = new KeenAnalysis({
      // 	projectId: '5e429d77c9e77c0001a35cf1',
      // 	readKey: '86900A71F1825A2C3F07C639B00B37A57CDCCBB446BBA7D207CF107D466AA0EC9212C08DA6E377995FFBC6E56AD0AB073D74C8B1BB366BD8D9BE802133561CAC55F6E96A845D6939A5DB7D08D2A49C668EAC7AFE4AAEA4BE7BD1572A655DCA8A',
      // });
      // const dataviz = new KeenDataviz({
      // 	type: 'area',
      // 	container: '#container',
      // 	widget: {
      // 		title: {
      // 			content: 'Book purchases',
      // 		},
      // 		subtitle: {
      // 			content: 'Monthly results',
      // 		},
      // 	},
      // 	settings: {
      // 		margins: {
      // 			top: 20,
      // 			left: 45,
      // 			right: 15,
      // 			bottom: 30
      // 		},
      // 		curve: 'spline',
      // 	},
      // });
      // client
      // 	.query({
      // 		analysis_type: 'count',
      // 		event_collection: 'book_purchase',
      // 		timeframe: {
      // 			start: '2019-08-01T00:00:00.000-00:00',
      // 			end: '2020-02-01T00:00:00.000-00:00',
      // 		},
      // 		group_by: ['author'],
      // 		interval: 'monthly',
      // 	}).then((res) => {
      // 		dataviz.render(res);
      // 	});

      const client = new KeenAnalysis({
        	projectId: '5c87b64ec9e77c0001cf5b6e',
        	readKey: 'd41156a2ed478d074f9898f1a6ab742a501a434ea64e7d46026e3d75af633f6e83b94d7c4580dc29280e6d44f68f1a7a04c9c7c074fd77ee84e2384cdb98d3b718b62f5509e87a738824719d2ad1e596e535bff6748cd7a74ec21ceaed87ccde',
        });
        const dataviz = new KeenDataviz({
        	type: 'area',
        	container: '#container',
        	widget: {
        		title: {
        			content: 'Traffic by Source',
        		},
        		subtitle: {
        			content: 'Daily Results',
        		},
        	},
        	settings: {
        		margins: {
        			top: 20,
        			left: 45,
        			right: 30,
        			bottom: 35
        		},
        		curve: 'linear',
            groupMode: 'stacked',
            stackMode: 'normal',
            theme: {
          axisY: {
            tickPadding: 13,
              },
            },
        	},
        });
        client
        	.query({
        		analysis_type: 'count',
        		event_collection: 'mobile_purchases',
        		timeframe: {
        			start: '2019-03-20T00:00:00.000-00:00',
        			end: '2019-03-26T00:00:00.000-00:00',
        		},
        		group_by: ['product.name'],
        		interval: 'daily',
        	}).then((res) => {
        		dataviz.render(res);
        	});

// First Attempt
      // const client = new KeenAnalysis({
      //   projectId: "5c87b64ec9e77c0001cf5b6e",
      //   readKey:"FB952962910C97DE3E1C6A25EB2FC6B22FDB1ACA9D572948EA18227287BC4E12"
      // });
      // const chart = new KeenDataviz({
      //   container: "#container",
      //   type: "area",
      //   title: "Traffic by Source",
      //   stacking: "normal",
      //   showLoadingSpinner: true,
      //   legend: {
      //     position: "bottom"
      //   },
      //   labelMapping: {
      //     apps: "Instagram",
      //     books: "Twitter",
      //     games: "Google",
      //     sounds: "FaceBook"
      //   },
      //   colorMapping: {
      //     Instagram: "#77A3BB", // column - color
      //     Twitter: "#9CC0A2",
      //     Google: "#F69F79",
      //     FaceBook: "#A689E9"
      //   },
      //   renderOnVisible: true
      //   // palette: "autocollector"
      // });
      // client
      //   .query({
      //     analysis_type: "count",
      //     event_collection: "mobile_purchases",
      //     timeframe: {
      //       start: "2019-03-20T00:00:00.000-00:00",
      //       end: "2019-03-26T00:00:00.000-00:00"
      //     },
      //     group_by: ["product.name"],
      //     interval: "daily"
      //   })
      //   .then(function(res) {
      //     // Handle the result
      //     chart.render(res);
      //   })
      //   .catch(function(err) {
      //     // Handle the error
      //     chart.message(err.message);
      //   });
    </script>
  </body>
